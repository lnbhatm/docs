Bash scripting
----------------------------------------------------------------------------------------------------
Change to root user :   sudo bash     or su 

Command to change the hostname  CMD: hostnamectl
hostnamectl
hostnamectl set-hostname --static "LAKSHMI"
dnf update
dnf install vim
exit to come-out from root

Clear Screen or terminal on linux : CMD clear
clear
Ctrl+L

UNIQUE CHARACTERS SECTION FEATURING TERMINAL CUSTOMIZATION AND HASH CHARACTER.
====================================================================================================
Special/unique charecter in bash has special meanings example: Characters Hash SemiColon.
special built-in meanings

# :- Comment liles.
     how interpret shell.
	 
	 vim first.sh    
	 vim is a text editor it will open the file if exists else creats.
	 
	 insert mode :  i or insert
	 
	 first line in the bash script
	 
	 #!/bin/bash  Please interpret this script as a bash script
	 
	 


echo command prints the text on the screen.
echo "Hi there how is it going what sort of day you are having?."  #this will print whatever to the screen.
comments are completly ignored by system.

escape
:wq
:q! quit without saving.

./first.sh permission denied.
ls -l   (no one has permission to execute)
chmod +x first.sh


Example: - echo "this is the example # blablabla"  here # is not interpreted as comment but
Example: - echo "this is the example" # blablabla  here # blablabla is commented.
or 
Example: - echo this is the example # blablabla  the also # blablabla is commented.


---------------------------------------------------------------------------------------------------
#!/bin/bash

name=tea
echo "The word $name contains ${#name} charecters"
---------------------------------------------------------------------------------------------------
OUTPUT:-
./first.sh 
The word tea contains 3 charecters

in this example # is not a comment but it returns the no of charecters in the given string.

---------------------------------------------------------------------------------------------------

Example: - # charecter used as a number system conversion. Binary to decimal 


---------------------------------------------------------------------------------------------------
#!/bin/bash

echo $(( 2#101))   #binary to decimal
echo $(( 8#101))   #octal  to decimal
echo $(( 16#101))  #hex   to decimal
---------------------------------------------------------------------------------------------------
OUTPUT:-
./first.sh 
5 
65
257
# binary/octal/hexadecimal  number converted as decimal value.
---------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------
Special charecter ; is used to seperate commands in bash scripts.
---------------------------------------------------------------------------------------------------
Example:-
echo "I am fine today";echo "I will be fine tomorrow as well"
a=10
if [ $a -gt 0 ]; then echo "Condition is True";else echo "False condition"; fi

OUTPUT:
./first.sh 
I am fine today
I will be fine tomorrow as well
Condition is True


colon is used as command seperator in a line.
we can write multiple command in one line by sepearting the command using  ; 
---------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------
Special charecter . is used to seperate commands in bash scripts.
---------------------------------------------------------------------------------------------------
cd .   here . means current directory.
cd ..  means to go back to previous directory.

ls -la  show hidden directory/files.
.     
.. 

single . usage example  cp  sourcepath .  copy to current directory.

----------------------------------------------------------------------------------------------------
partial quoting double quotes:  ""   
----------------------------------------------------------------------------------------------------
Example for the special charecter ""  double quotes


#!/bin/bash

colors="read black yellow green white"
#LOOP1
echo "output of loop1"
for col in $colors
do
	echo $col
done

#LOOP2
echo "output of loop2"
for col in "$colors"
do
	echo $col
done

----------------------------------------------------------------------------------------------------
OUTPUT:

./first.sh 
output of loop1
read
black
yellow
green
white
output of loop2
read black yellow green white  
[ double quotes used in this example for "$colors" prevented word splitting. and used as a single
  string ]
                              
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
Special Charecter:- single quotes  prevents all special charecters in a string litrally.
                    it does not allow variable referencing at all.
----------------------------------------------------------------------------------------------------
Example:-

#!/bin/bash

colors="read black yellow green white"
for col in '$colors'
do
	echo $col
done

OUTPUT:-
./second.sh 
$colors        

This example printed the litral value and variables are not referenced.
ignored all the special charecters in side the single quote.
as is.
----------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------------------------
Linux commands
----------------------------------------------------------------------------------------------------

Linux is case sensitive.

cd     --> change working directory.
pwd    --> present working directory.
ls     --> list files/directory under a directory.
let    --> is the command works on airthmetic operator.


----------------------------------------------------------------------------------------------------
Charecter:  comma seperator  ,
----------------------------------------------------------------------------------------------------
Example:

			#!/bin/bash
			
			let "y=(( x=20,20/10))"
			echo $y

OUTPUT:
./second.sh 
2   

comma returns the value of last 
basically it links together a series some sort of airthmatic operations  they all will be evaluated 
but only the last operation is actually gets returned.
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
Charecter:  double comma
----------------------------------------------------------------------------------------------------
Example:

			#!/bin/bash
			
			var=DSLCoNnEction
			
			echo ${var,}
			echo ${var,,}


OUTPUT:
		./first.sh 
		dSLCoNnEction     with single comma only first letter is converted to lower case.
		dslconnection     with double comma complete strings are converted to lower case.


Lower case letter conversion
changes all charecters in a word to lowercase.

----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
Charecter:  Escap charecters or back slash  \
----------------------------------------------------------------------------------------------------
Example: Suppose we want output with quotes  Example print "Linux is awesome"

			#!/bin/bash

			echo "\"Linux is awesome\""

OUTPUT:
		"Linux is awesome"
		
		\ - ignores or escapes the quote from its special meanings.
		
Example2:

ls --help | grep "\-U"
                               use of --sort=none (-U) disables grouping
      --sort=WORD            sort by WORD instead of name: none (-U), size (-S),
  -U                         do not sort; list entries in directory order


In this example backslash ignores the meanings of the arguments to grep and considers as a string 
search -U  
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter:  forward slash  /
----------------------------------------------------------------------------------------------------
slash is also used when the tab is pressed and auto completion is done.
Seperate the part of the filename.  cd /home/lakshmi/test/
used to exeute the executable with ./ 
airthmetic operation like divide : division

example:-  let val=500/2
           echo "$val"
OUTPUT:
			250
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
Charecter:  back quote : `
----------------------------------------------------------------------------------------------------
It basically acts as a some sort of substitution for something.
it takes the output of a command and it assigns to a variable.


Example:-  echo date
OUTPUT:
           date

Example
			echo `echo date`
OUTPUT:
			Sat Feb 18 08:52:49 PST 2017
			

Example:
			#!/bin/bash
			let val=500/2
			echo "$val"

			val2=`echo "$val"`
			echo $val2

OUTPUT:
			250
			250		

This will be useful to take the standard out and place it in a variable.			
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
Charecter: colon :
----------------------------------------------------------------------------------------------------
Gnerally do nothing operation. do none.


Example:
			#!/bin/bash
			var=200
			if [ $var -gt 100 ]
			then
			   :
			else
				echo $var
			fi

OUTPUT:
			
nothing will be on the screen as the condition is passed and : is executed and did nothing.			


colon can alse be using in conjection with the direction operator example to truncate file length.
to zero if the file exists. or if does not exists it will create it.

: > wood.txt   will empty the content of the file wood.txt as  do nothing is redirected to the file.

but if the file does not exist it will create empty file wood.txt
but if we have : >> then the file remains unchanged as we added nothing.
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
Charecter: exclamation mark !
----------------------------------------------------------------------------------------------------
This charecter is used to nagate or reverse some sort of condition or expression or exist status.

Example:-
			#!/bin/bash
			var=0
			if [ "$var" != 0 ] 
			then
			   echo "NOT"
			else
			   echo "YES"
			fi

OUTPUT:
			./first.sh 
			YES

	
Used as not equal to  (negation check.)
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: wildcard *
----------------------------------------------------------------------------------------------------
Example:
on the shell prompt
			touch test1 test2 test3 test4 test5

			now let's say we need to delete 100 + files starting with test/
			rm -rf test*
			all files with the charecters test and anything after that will be matched with * will 
			be deleted.		

whild card * is used to match everthing.

* is also used in mathematical operation for multiplication.
** is used as exponentiation   2 to the power 3  can be written as 2**3

Example:
			#!/bin/bash
			let var=100*10
			let var2=10**3
			echo "$var $var2"

OUTPUT:
			./example.sh 
			1000 1000


----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: Question Mark ?  
----------------------------------------------------------------------------------------------------
This would be test operator.  Similar to ternary operator in C program.

Example:-
			#!/bin/bash
			var1=10
			echo $((var2 = var1 < 20 ? 1:0 ))
			
OUTPUT:-
			./example.sh 
			1
			
if var1 is less than 20 is true so the output is 1 else 0.
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: Parentheses ( )
----------------------------------------------------------------------------------------------------
It is used to group commands inside of them.
It treats as subshell which script can not read.

Example:-
			#!/bin/bash
			var=5
			(var=10;)
			echo $var

			
OUTPUT:
			./example.sh 
			5
in this example (var=10;) is not interpreted to read by shell hence no change in the variable var=5

() is also used for array initialization.
  
weekdays=(sunday monday tuesday wednesday thursday friday saturday)
  
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: curly brackets {} or curly paranthesis
----------------------------------------------------------------------------------------------------
Examples :
#!/bin/bash
echo \${name,addrs,phone}\$
echo \"{name,addrs,phone}\"

OUTPUT
./example.sh 
$name$ $addrs$ $phone$
"name" "addrs" "phone"

using the flower bracket and escape charecters.


Taking contents of multiple files and put in to one single file.
cat command can be used to display the contents of the file.
Ans:-   cat {test1.txt,test2.txt,test3.txt} > allinone.txt

you can create a loop wihout a loop.

echo {0..9}  this will print 0 1 2 3 4 5 6 7 8 9 without using any looping construct.

curly braces can also be used to sepearting a piece of code. then can represent a block of code
it will create a function.

Example:-

			#!/bin/bash

			var1=1
			var2=2

			{
			var1=10
			var2=20
			}

			echo $var1 $var2
			
			
OUTPUT:- 
			./example.sh 
			10 20

here even though the variables are under the curly brace are visible to the script.

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: Logical or || 
----------------------------------------------------------------------------------------------------
Example:
				#!/bin/bash
				var=1
				if [ "$var" -gt 0 ] || [ "$var" -eq 10 ]
				then
					echo "one of the condition is true"
				else
					echo "Both condition are false"
				fi

OUTPUT:
			one of the condition is true
used to combine 2 or more condition , if any one is true it will yeild true.
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: Logical and operation : && 
----------------------------------------------------------------------------------------------------
Example:-
				#!/bin/bash
				var=1
				if [ "$var" -gt 0 ] && [ "$var" -eq 10 ]
				then
					echo "Both conditions are true"
				else
					echo "One or more condition are false"
				fi
OUTPUT
				./example.sh 
				One or more condition are false

And logic is if all conditions returns True then if part will be executed, if any condition fails
else part will be executed.
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter:  - (single - charecter) 
----------------------------------------------------------------------------------------------------
This charecter is used for optional prefix 
used as in option in some command.
arguments passed to some function.
-eq -lt -eq  
redirection standard input or output.
It can be used as minus sign or airthmetic involving subtraction.
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter:  - + % / *  are all airthmetic operators.
----------------------------------------------------------------------------------------------------
Modulus opeartor example
#!/bin/bash
let var=5/4
echo $var

OUTPUT
1

Modulo operator gives the remainder of a division.
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
Charecter: Tilda  ~  or home directory.
----------------------------------------------------------------------------------------------------
This is the shortcut used to go switch to the home directory of a current user.
it will take to home directory of a current user.

Example:
Command line type :     # cd ~
                        # pwd
						
root@ubuntu:~/lakshmi/scrips# pwd
/home/girish/lakshmi/scrips
root@ubuntu:~/lakshmi/scrips# cd ~
root@ubuntu:~# pwd
/home/girish
root@ubuntu:~# 


~+ : current working directory 
~- : previous directory.
Example
root@ubuntu:~/lakshmi/scrips# pwd
/home/girish/lakshmi/scrips
root@ubuntu:~/lakshmi/scrips# echo ~+
/home/girish/lakshmi/scrips
root@ubuntu:~/lakshmi/scrips# echo ~-
/home/girish
root@ubuntu:~/lakshmi/scrips# 
----------------------------------------------------------------------------------------------------
charecter: ^
----------------------------------------------------------------------------------------------------
This is used  in upper case conversion.

Example:
#!/bin/bash
var=inDian
echo ${var^}
echo ${var^^}

OUTPUT
./example.sh 
InDian
INDIAN

^ charecter used here converts the first letter to uppercase
^^ used here converts all case to uppper case. 

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
BASH VARIABLES AND PARAMETERS IN BASH
----------------------------------------------------------------------------------------------------
Variables are some sort labels or names to represent certain values or sets of values to computers 
memory.
airthmatic operation
string phrasing
name of the variables are not same as the value of the variable.
Example:-
		#!/bin/bash
		var=10
		echo var
		echo $var

OUTPUT
		./example.sh 
		var
		10


Doller sign is not needed for assigning value to the variable during declaration.

Example
		#!/bin/bash
		var=10
		unset var
		echo var
		echo $var

OUTPUT
		./example.sh 
		var


unset command assigned value of the variable to none.


Example:

#!/bin/bash
var1=10
((var2=var1<10?1:0))
echo $var2

OUTPUT
./example.sh 
0
in this example doller sign prefix to the variable is not needed.
Example2
#!/bin/bash
var1=10
((var2=var1))
echo $var2
OUTPUT
./example.sh 
10
in this example doller sign prefix to the variable is not needed.


Assigning value to the variable using the standard input with read command.

Example:-
			#!/bin/bash
			echo "Enter some value"
			read var1
			echo "You have entered : $var1"
OUTPUT
			./example.sh 
			Enter some value
			Welcome
			You have entered : Welcome

Assigning a list of values to the variable used in a loop.

Example:
			#!/bin/bash
			for var in 1 2 3 4 5
			do
			echo $var
			done

OUTPUT
			1
			2
			3
			4
			5

The variable var gets the value 1 2 3 4 5 during each iteration of the for loop.
for var in 1 2 3 4 5 can be simplied as  for var in {1..5}
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
RETURN VALUES.
----------------------------------------------------------------------------------------------------
When the script is executed we should know the result of the script execution is sucessful or not.
exit status.  error message.
exist status can be obtained from :  $?  it is the status of the last executed command.
exit status of the last commad that is executed in a script.

Example for $?
		#!/bin/bash
		echo "This is the example"
		echo Return value: $?
		echo "Creating error condition"
		abdhdhdhdhd
		echo return value is: $?
OUTPUT
This is the example
Return value: 0
Creating error condition
./example.sh: line 6: abdhdhdhdhd: command not found
return value is: 127

if the command exeuction is sucessful then $? will return 0 if failed it will return positive integer
value in this case 127
127 is the value of the exist value.

$# - gives the number of commandline arguments passed to a script.
$0 - gives the name of the script.
basename -> removes the prefix to the filename path.

Example

			#!/bin/bash
			NO_OF_ARGS=2
			E_BADARGS=85
			E_UNREADABLE=86
			if [ $# -ne "$NO_OF_ARGS" ]
			then
			   echo "Usage ` basename $0` testfile1 testfile2"
			   exit $E_BADARGS
			fi

OUTPUT
Usage example.sh testfile1 testfile2
echo $?
85
here 85 is the value for the bad arguments.

in this example basename $0 gives the name of the script file executing.
-r will retuen true if the user running the test has the permission to read the file.
   file exists and redable
-e tests if the file is exists at all.
-f tests if the regular file exists not a directory.
-s file exists not a zero size file.
-w will return true if the user running the test has the permission to write the file.
-x will return true if the user running the test has the permission to execue.
! reverses the result of the file test operation
nested if statemnt in shell

$$ will give the process id of the script.

----------------------------------------------------------------------------------------------------
File test opeartors
----------------------------------------------------------------------------------------------------
variables can hold path.
Example: To check the existance of a file.
		#!/bin/bash
		var=/home/girish/lakshmi/scrips/wood.txt
		if [[ -e $var ]]
		then
			echo "File exists"
		else
			echo "File does not exists!" 
		fi 


Example:  double parantheses.  ((..))
          if the result of an airthmetic expression is zero then the exit status is 1 or false
		  if the result of an airthmatic expression is not zero then the exit status is 0 or true
		  
			#!/bin/bash
			((2>1))
			echo Exit status: $?
			(( 2<1 ))
			echo Exit status: $?
			
OUTPUT
			./example.sh 
			Exit status: 0
			Exit status: 1 


----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
BUILT IN VARIABLES
----------------------------------------------------------------------------------------------------
echo $BASH
/bin/bash    
$BASH  gives the path of the bash program.
$BASH_VERSION  gives the current version of the bash program.
$PATH : gives series of path mentioned with the seperation of colon
$CDPATH
UID  user real id number. it is read only.
EUID Effective user id , it can be same as UID but not necessarliy the same.
ROOT_UID : root user will have the UID as 0 by default.

Fedora starts its numbering of regular user accounts at 500, while Ubuntu starts at 1000




Example: To print the processid of the current script.
				#!/bin/bash
				echo Processid: $$
OUTPUT
				./example.sh 
				Processid: 9114

htop  command will give the list of process details currently running.
      [ sudo apt-get install htop ]
	  it gives graphical view of the various process running.
top    				
Enter top on the bash shell and press q to quit.

echo $BASH_VERSION     OUTPUT: 4.3.46(1)-release

Example: $BASH_VERINFO

			#!/bin/bash
			for i in {0..5}
			do
			echo "BASH_INFO[$i]=${BASH_VERSINFO[$i]}"
			done
OUTPUT
			BASH_INFO[0]=4
			BASH_INFO[1]=3
			BASH_INFO[2]=46
			BASH_INFO[3]=1
			BASH_INFO[4]=release
			BASH_INFO[5]=i686-pc-linux-gnu

echo ${BASH_VERSINFO[@]}  will display the complete array.
4 3 46 1 release i686-pc-linux-gnu

echo $PATH
/home/girish/bin:/home/girish/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin        
echo -n means print on the same line and not go to second line.
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
SIMPLE FUNCTION
----------------------------------------------------------------------------------------------------
$FUNCNAME   is the inbuilt environment varable inside the user defined function gives the name of the function.
           Only works inside the function and not meant for outside.
Example:
				#!/bin/bash
				somefunction()
				{
				  echo "Some function is:($FUNCNAME)"
				}
				somefunction
				echo "Outside ,\$FUNCNAME = $FUNCNAME"
OUTPUT
				Some function is:(somefunction)
				Outside ,$FUNCNAME = 

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
LOOPS
----------------------------------------------------------------------------------------------------
There are certain constructs which iterate certain times and does some sort of actions untill 

They are basically constructs repeat some sort of actions for a certain number of iterations that 
number of interation is usually defined some sort of a condition and  as long as that condition is true
itreates through list of commands executed.

we have three different loop construts in bash i.e 
for     loop
while   loop
until   loop

Also controlling loop through break and control command.
case and select construct.
which control the flow of commands execution.

Nested for loop : first innner most loop will be finished and then our loop will be executed.


IO Commands in bash

echo
read
printf - universal way outputting to standard console , these are used in programming language.
         can be applied very much almost all the program.

declare - declaring a variable.
example :- declare -r PI=3.14
Exammple:- declare and printf in bash

			#!/bin/bash
			declare -r PI=3.14
			printf "Second decimal of PI is : %2.6f\n", $PI
OUTPUT
			./example.sh 
			Second decimal of PI is : 3.140000	 

			
Example:
			#!/bin/bash
			a=10
			b=25
			c=18
			printf "a=%d b=%d c=%6.2f\n" $a $b $c

OUTPUT
			./example.sh
			a=10 b=25 c= 18.00			
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
REGULAR EXPRESSIONS
----------------------------------------------------------------------------------------------------
strings of characters , characters them self have the literal meanings, purpose of regular expression 
are search or manipulate text.
grep sed awk  commands are used to search texts and manipulate strings.

Input output redirections.

Files that are open by default are standard input / output /error files.
stdin  : read from the standard screen with file descriptor 0
stdout : display messages on the standard screen with file descriptor 1
stderr : display standard error messages on the standard screen with file descriptor 2


Redirection:   

standard input only redirection   1>test1.txt
standard output only redirection   2>test2.txt
standard error  only redirection   3>test3.txt

redirect standard output and error message as :  
build.sh > log.txt  2>&1


----------------------------------------------------------------------------------------------------
ADVANCED REDIRECTION EXAMPLE
----------------------------------------------------------------------------------------------------
#!/bin/bash
echo 12345 > fd.txt
exec 3<>fd.txt
read -n 2 <&3
echo -n . >&3
exec 3>&-
cat fd.txt
----------------------------------------------------------------------------------------------------
Explanation:-

echo 12345 > fd.txt  ->  we echo out 12345 and redirect in to a file fd.txt
exec 3<>fd.txt       ->  we open a file descriptor 3 and assign it to fd.txt
						open the fd.txt and assign a file descriptor  3 to it.						
read -n 2 <&3        -> we read only 2 characters from the file  
echo -n . >&3        -> we write a decimal point there.
exec 3>&-            -> we close the file descriptor fd3.
cat fd.txt           -> read the content of the file fd.txt

Reading 2 charecters from a file :  read -n 2 line < fd.txt
Reading file 

while read line; do echo $line; done < fd.txt
----------------------------------------------------------------------------------------------------

sudo su   # This command can be used in ubunto to login as super user.

----------------------------------------------------------------------------------------------------
*  READING A FILE LINE BY LINE USING THE FILE DESCRIPTOR.
----------------------------------------------------------------------------------------------------
exec 1000<>fd.xt
----------------------------------------------------------------------------------------------------


Functions:
Functions are very important chapter to larn, functions are something which you will commonly write and

Syntax:--

function_name ( )
{
 
 some set of commands to execute.
 
}

Function can also be written in a single line, in this case all commands inside the function needs to be 
sepeated by a semicolon.

function_name ( ) { command1;command2;command3;etc}

calling function in the example.  
note:- function must be defined before it is called.
       functions cannot be empty, however it can have 
       functions can be nested.but the function call should be the in the order for function defined.
       function name can be anything.

Empty function like below is not allowed.
function_name()
{

}
however function can have no operation command i.e colon as below.
function_name()
{
  :
}

----------------------------------------------------------------------------------------------------
Nested function example
----------------------------------------------------------------------------------------------------
#!/bin/bash

function1()
{
  echo "This is function:1"
  function2()
  {
    echo "This is function:2"
  }
}
function1     # must be called in the order it is nested.
function2
----------------------------------------------------------------------------------------------------
function can have any name.
----------------------------------------------------------------------------------------------------
#!/bin/bash
_()
{
  echo "Beging function: $FUNCNAME"

}
#calling function
_

OUTPUT:
Beging function: _
----------------------------------------------------------------------------------------------------
We can pass arguments to functions
value of arguments are assigned based on the position $1 $2 up to $9
----------------------------------------------------------------------------------------------------
#!/bin/bash
fun()
{
  echo "arg1=$1 arg2=$2"
}
var1=1
var2=100
fun $var1 $var2

OUTPUT:
arg1=1 arg2=100

note: in the function fun if you echo as echo "arg1=$3 arg2=$4"  Result will be empty becase of the
order of assignment is important.
----------------------------------------------------------------------------------------------------
Arrays.
----------------------------------------------------------------------------------------------------
Vi editor command
escape colon set number
escape colon set nonumber
delete range of lines:
escape colon 2,6d         # this command will delete lines from 2 to 6
escape colon 2,$d         # this command will delete lines from 2 to end of the file 
                          # $ takes the end of line.
----------------------------------------------------------------------------------------------------
for i in {0..100}; do echo "$i" >> example.sh ; done
----------------------------------------------------------------------------------------------------

#!/bin/bash
arr[0]=20
arr[1]=30
echo -e "Array Elements ${arr[0]}"
echo -e "Array Elements ${arr[1]}"

OUTPUT:
Array Elements 20
Array Elements 30

Array can be declared using declare keyword.
array initialization.


#!/bin/bash
a=something123
echo ${a[0]}
echo ${a[*]}
echo ${a[1]}
echo ${#a[@]}

OUTPUT:
something123
something123

1


${a[*]}       ===> This will list out all elements in an array.
echo ${a[0]}  ===> This will list the first element of the array  
${#a[@]}      ===> This will print the no of elements in the array  size of the array.



#!/bin/bash
arr=( zero one two )
echo ${arr[0]}
echo ${#arr[0]}
echo ${#arr[*]}
echo ${#arr[@]}

zero
4
3
3

---------------------------------------------------------------------------------------------------
Lists 
and and or list constructs
&&   And list
||   or list

expression1 && expression2   --->>  expression2 will be executed only if the expression1 returns True.
expression1 || expression2   --->>  expression2 will be executed if the expression1 returns False.

---------------------------------------------------------------------------------------------------
Debuging scripts.
---------------------------------------------------------------------------------------------------
sh -n <script name> does not run the script but checks the syntax of the script.
sh -v <script name>  verbose option for debugging.
sh -x <script name>  


Exammple:

#!/bin/bash
rm abc 2>/dev/null || echo "Error in $LINENO"
for i in 1 2 3
do
done

OUTPUT:-
Error in 2
./example.sh: line 5: syntax error near unexpected token `done'
./example.sh: line 5: `done'

or 

sh -n example.sh
example.sh: line 5: syntax error near unexpected token `done'
example.sh: line 5: `done'

This command does not execute the script but checks the syntax error.


Exammple for verbose option.

sh -v example.sh
#!/bin/bash
rm abc 2>/dev/null || echo "Error in $LINENO"
Error in 2
for i in 1 2 3
do
done
example.sh: line 5: syntax error near unexpected token `done'
example.sh: line 5: `done'


set -v can also be added inside the script.

Exammple:

#!/bin/bash
set -v
rm abc 2>/dev/null || echo "Error in $LINENO"
for i in 1 2 3
do
done

OUTPUT:

./example.sh
rm abc 2>/dev/null || echo "Error in $LINENO"
Error in 3
for i in 1 2 3
do
done
./example.sh: line 6: syntax error near unexpected token `done'
./example.sh: line 6: `done'


similarly -x can also be used for debugging the script for logical and syntax error.

---------------------------------------------------------------------------------------------------
https://www.youtube.com/watch?v=l0QGLMwR-lY
 
https://www.youtube.com/watch?v=IngllNs1pCU
https://www.youtube.com/watch?v=6hAeBJvAM2A
https://www.youtube.com/watch?v=dOCqHJ1i_Jw
https://www.youtube.com/watch?v=Aloc9UdhsC4

https://www.youtube.com/watch?v=bju_FdCo42w&list=PLtK75qxsQaMLZSo7KL-PmiRarU7hrpnwK

---------------------------------------------------------------------------------------------------
Q:  how will you know which kernel version is currently running on the linux system ?
A:  command  uname gives the information.
    uname -a 
	
Q:  how can you check a system's current IP address ?
    Command ifconfig gives the information about the IP address.	
	[loop back device, ethernet device]
	
	ifconfig
	ip addr show


Q: how do you check for free disk space?
   df -a
   df -ah  human redable format.
   
   
Q: how do you manage services on a system?
   service command
   ex: service udev status
   or systemd
   systemctl  status servicename
   
   
Q: how would you check the size of a directory's contents on  disk?
   du -sh   disk usage command.

   
Q: how would you check open ports on a linux machine?
   netstat 
   
   sudo netstat -tulpn
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:2049            0.0.0.0:*               LISTEN      -
tcp        0      0 0.0.0.0:55049           0.0.0.0:*               LISTEN      5649/rpc.mountd
tcp        0      0 0.0.0.0:139             0.0.0.0:*               LISTEN      5697/smbd
tcp        0      0 0.0.0.0:59630           0.0.0.0:*               LISTEN      4905/rpc.statd
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      4886/portmap
tcp        0      0 0.0.0.0:35764           0.0.0.0:*               LISTEN      -
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      5484/sshd
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      5568/cupsd
tcp        0      0 0.0.0.0:445             0.0.0.0:*               LISTEN      5697/smbd
tcp6       0      0 :::22                   :::*                    LISTEN      5484/sshd
udp        0      0 0.0.0.0:2049            0.0.0.0:*                           -
udp        0      0 15.213.119.76:137       0.0.0.0:*                           5695/nmbd
udp        0      0 0.0.0.0:137             0.0.0.0:*                           5695/nmbd
udp        0      0 15.213.119.76:138       0.0.0.0:*                           5695/nmbd
udp        0      0 0.0.0.0:138             0.0.0.0:*                           5695/nmbd
udp        0      0 0.0.0.0:35874           0.0.0.0:*                           4905/rpc.statd
udp        0      0 0.0.0.0:841             0.0.0.0:*                           4905/rpc.statd
udp        0      0 0.0.0.0:46168           0.0.0.0:*                           -
udp        0      0 0.0.0.0:5353            0.0.0.0:*                           5529/avahi-daemon:
udp        0      0 0.0.0.0:38762           0.0.0.0:*                           5649/rpc.mountd
udp        0      0 0.0.0.0:111             0.0.0.0:*                           4886/portmap
udp        0      0 0.0.0.0:44913           0.0.0.0:*                           5529/avahi-daemon:


Q: How do you check cpu usage for a process?   
   
   ps aux | grep "name of the process" 
   Learn pipe basics.
   top 
   htop  - gives graphical representaion.
   
   
Q: Dealing with mounting.
   ls /mnt/
   mount "mount address" "mount point"
   check the existing mount 
   mount
   /etc/fstab  contains the entry of mounted devices.
   
	# /etc/fstab: static file system information.
	#
	# <file system> <mount point>   <type>  <options>       <dump>  <pass>
	proc            /proc           proc    defaults        0       0
	# /dev/sda1
	UUID=e8d5bb05-3e5f-4302-b8c7-307acf7dfcf8 /               ext3    relatime,errors=remount-ro 0       1
	# /dev/sda5
	UUID=75731b2f-287b-49fe-8af1-81aa11d8b044 none  swap    sw         0       0
	#/dev/sda5  none  swap  sw  0  0
	#/dev/scd1       /media/cdrom0   udf,iso9660 user,noauto,exec,utf8 0       0
	#/dev/scd0       /media/cdrom1   udf,iso9660 user,noauto,exec,utf8 0       0
	#/dev/fd0        /media/floppy0  auto    rw,user,noauto,exec,utf8 0       0

   
Q: How do you look up something you don't know?
   man pages  : manual pages.
   man <command name>
   google
   stack overflow.   
   
   lsof   
   List open files.
   it gives list of all open files.
   
   look host
   netstat -tupln     
   curl localhost  
   which process has file open ?
   lsof /var/log/daemon.log
   COMMAND  PID   USER   FD   TYPE DEVICE SIZE   NODE NAME
   syslogd 5338 syslog    4w   REG    8,1    0 380346 /var/log/daemon.log
   
   Find all files that a process had opened?
   lsof -p < process id >
   lsof -p 27513
   
   /dev/null
   /dev/zero
   
   where is the binary for process X?
   lsof -p < process id > | grep bin
   
   which shared libraries has process X opened?
   lsof -p < process id > | grep .so
   
   lsof -p 27513 | grep .so | awk '{print $9}' | while read line;do basename $line; done
   lsof -p 27513 | grep bin | awk '{print $9}' | while read line;do echo $line; done
   lsof -p 27513 | grep .so | awk '{print $9}' | while read line;do echo $line; done
   
   which file is process x logging to ?
   
   lsof <library name>   To know more about the service status of the lib any hang etc.
   
   which files does user x has open?
   lsof -u <username> 
   lsof -u tbmbuild

   which process is listening on port X ( or using protocol Y) ?
   ls -i
   ls -i :80
   
   
   lsof -i tcp   
   lsof -i udp   

   
   
---------------------------------------------------------------------------------------------------
https://www.youtube.com/watch?v=k4Ww6gFeF0M
---------------------------------------------------------------------------------------------------
standard shell is sh  [ borne shell or bash shell]
bash shell is the default shell in the system.
command to get the current shell:   echo $0

Changing the shell.  (Bourne Shell, C shell, Korne shell  )
Exexution command is sh.
how to change the shell to kshel.
ksh  
exit is the command to be used to go back to the previous shell.
bash prompt is $
bash prompt syntax is sh.  (standard shell)

Shell script is nothing but collection of unix commands 
collection of bash commands bash shell
collection of dos commands does shell
collection of windows commands windows shell
collection of Linux commands Linux shell
collection of unix commands unix shell 

C   shell prompt % and execution Csh
K   shell prompt $          


system defined variables
User   defined variables

Script means weakly or loosely types programming   interpretr based 
programing languages are stricly typed programing syntax based. compiler based. 

export needs to be used to declare variable so that the variable is available to all the shells (bash,csh,ksh)
export is the key word used to make the global scope.
Unix is case sensitive operating system.
Environment variables in unix/linux
HOME
LOGNAME
USER
PS1           Primary prompt
PS2           Primary prompt
---------------------------------------------------------------------------------------------------    
Shell scripts are interactive and not interactive.   
---------------------------------------------------------------------------------------------------    
https://www.youtube.com/watch?v=-GnLLXPjLN4





---------------------------------------------------------------------------------------------------    
Advanced example.

create a folder for every month starting from 2012 to 2017
mkdir -p {2012..2017}-{01..12}
mkdir Account_{2016..2018}_{01..12}

Removing the folder creted above.
ls | grep -E [0-9]{4} | xargs rm -rvf
rm -rvf Account_201*
---------------------------------------------------------------------------------------------------    
aliasing.   setting one command to another command.
alias example.

alias ls=$(echo hi)

---------------------------------------------------------------------------------------------------   
https://www.youtube.com/watch?v=uqHjc7hlqd0

Command types in bash

1. File:  External Executable file.
2. Builtin command compiled in as part of bash
3. Keyword : Reserved syntactic word.
4. Function : user definable named compound commad
5. Alias: User definable, simple command substitution.

man bash
man man
help
help help


do done
while until for select
if case 

Command Groups 
      Grouped list of commands, sharing any external redirections and whose return value is that of the list.
      (list) {list;}
	  
	  

while loop
-----------
while list1;do list2;done

Execute list1; if success, execute list2 and repeat.
continue until list1 returns a non zero status (fails).

  

until loop
-----------
until list1;do list2;done

Execute list1; if Failure, execute list2 and repeat.
continue until list1 returns a status 0 (success).

Reading line by line from a file 
while read line ; do echo $line;done < test.txt

i=0;
j=20
until [ $i -eq "$j" ]; do echo $i; let i=$i+1; done

c style for loop
j=20
for (( i=0;i<j;i++)); do echo $i; done

select loop  : specifically to get the user input.
can be used to build some kind of menu system.

======================================================================================
									TESTS
======================================================================================




======================================================================================




































